module.exports = class Data1713820609279 {
    name = 'Data1713820609279'

    async up(db) {
        await db.query(`CREATE TABLE "burn" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "pool_address" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "owner" text, "amount" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "tick_lower" integer NOT NULL, "tick_upper" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_dcb4f14ee4534154b31116553f0" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f6475554465c84891d87bc3a3c" ON "burn" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_20ec76c5c56dd6b47dec5f0aaa" ON "burn" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_8a5f02b871c489f84cb161aca1" ON "burn" ("pool_address") `)
        await db.query(`CREATE INDEX "IDX_22b68d0fc4aa2284f6305498d4" ON "burn" ("pool_id") `)
        await db.query(`CREATE TABLE "swap" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "sender" text NOT NULL, "recipient" text NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "sqrt_price_x96" numeric NOT NULL, "liquidity" numeric NOT NULL, "tick" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_4a10d0f359339acef77e7f986d9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_dea8eaf44bd700adce9660e961" ON "swap" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_78506c4050ae7cedd50b08c0dc" ON "swap" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_5a10a601df84d388a7b43f9f24" ON "swap" ("pool_address") `)
        await db.query(`CREATE INDEX "IDX_e78e7b899d2e3327494e5fe975" ON "swap" ("pool_id") `)
        await db.query(`CREATE TABLE "pool" ("id" character varying NOT NULL, "created_at_timestamp" TIMESTAMP WITH TIME ZONE, "created_at_block_number" integer, "token0_id" text, "token1_id" text, "initial_tick" integer, "initial_sqrt_price_x96" numeric, CONSTRAINT "PK_db1bfe411e1516c01120b85f8fe" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "mint" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "owner" text NOT NULL, "sender" text, "amount" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "tick_lower" integer NOT NULL, "tick_upper" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_fcaea791104aa41aa11dac29cb2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_4e34d1dadc0d2f5d9155294eee" ON "mint" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_19f4328320501dfd14e2bae085" ON "mint" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_9229153b1a3118ce5a233d3c39" ON "mint" ("pool_address") `)
        await db.query(`CREATE INDEX "IDX_dbeb28d0d385cca9a032c625ca" ON "mint" ("pool_id") `)
        await db.query(`CREATE TABLE "collect" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "token_id" numeric NOT NULL, "recipient" text NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "transaction_id" character varying, CONSTRAINT "PK_48dc0a6d1738eb0ee8f1e13d3d1" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1722f920cca20ead801b734b40" ON "collect" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_7b01351910866ba55a09f4f147" ON "collect" ("transaction_id") `)
        await db.query(`CREATE TABLE "tx" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "from" text NOT NULL, "to" text, "gas_used" numeric NOT NULL, "gas_price" numeric NOT NULL, CONSTRAINT "PK_2e04a1db73a003a59dcd4fe916b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "increase_liquidity" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "token_id" numeric NOT NULL, "liquidity" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "transaction_id" character varying, CONSTRAINT "PK_d9ccbaf724380f4c9f69a2029ba" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_de456a5f4e11486aeb0077d400" ON "increase_liquidity" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_8a500e5fa2554fe62f72335979" ON "increase_liquidity" ("transaction_id") `)
        await db.query(`CREATE TABLE "decrease_liquidity" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "token_id" numeric NOT NULL, "liquidity" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "transaction_id" character varying, CONSTRAINT "PK_3e6f5ff9c60cd556faa95ba262a" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_be0fc1db95f91615e637dd4058" ON "decrease_liquidity" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_3af507a4af77cb90a45ddb8be4" ON "decrease_liquidity" ("transaction_id") `)
        await db.query(`CREATE TABLE "transfer" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "token_id" numeric NOT NULL, "from" text NOT NULL, "to" text NOT NULL, "transaction_id" character varying, CONSTRAINT "PK_fd9ddbdd49a17afcbe014401295" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e8a057744db5ad984bbea97444" ON "transfer" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_fcd6254da86c093d217e6cf242" ON "transfer" ("transaction_id") `)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_20ec76c5c56dd6b47dec5f0aaa8" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_22b68d0fc4aa2284f6305498d4e" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_78506c4050ae7cedd50b08c0dc5" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_e78e7b899d2e3327494e5fe975d" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_19f4328320501dfd14e2bae0855" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_dbeb28d0d385cca9a032c625cad" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "collect" ADD CONSTRAINT "FK_7b01351910866ba55a09f4f147a" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "increase_liquidity" ADD CONSTRAINT "FK_8a500e5fa2554fe62f723359796" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "decrease_liquidity" ADD CONSTRAINT "FK_3af507a4af77cb90a45ddb8be46" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_fcd6254da86c093d217e6cf2429" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "burn"`)
        await db.query(`DROP INDEX "public"."IDX_f6475554465c84891d87bc3a3c"`)
        await db.query(`DROP INDEX "public"."IDX_20ec76c5c56dd6b47dec5f0aaa"`)
        await db.query(`DROP INDEX "public"."IDX_8a5f02b871c489f84cb161aca1"`)
        await db.query(`DROP INDEX "public"."IDX_22b68d0fc4aa2284f6305498d4"`)
        await db.query(`DROP TABLE "swap"`)
        await db.query(`DROP INDEX "public"."IDX_dea8eaf44bd700adce9660e961"`)
        await db.query(`DROP INDEX "public"."IDX_78506c4050ae7cedd50b08c0dc"`)
        await db.query(`DROP INDEX "public"."IDX_5a10a601df84d388a7b43f9f24"`)
        await db.query(`DROP INDEX "public"."IDX_e78e7b899d2e3327494e5fe975"`)
        await db.query(`DROP TABLE "pool"`)
        await db.query(`DROP TABLE "mint"`)
        await db.query(`DROP INDEX "public"."IDX_4e34d1dadc0d2f5d9155294eee"`)
        await db.query(`DROP INDEX "public"."IDX_19f4328320501dfd14e2bae085"`)
        await db.query(`DROP INDEX "public"."IDX_9229153b1a3118ce5a233d3c39"`)
        await db.query(`DROP INDEX "public"."IDX_dbeb28d0d385cca9a032c625ca"`)
        await db.query(`DROP TABLE "collect"`)
        await db.query(`DROP INDEX "public"."IDX_1722f920cca20ead801b734b40"`)
        await db.query(`DROP INDEX "public"."IDX_7b01351910866ba55a09f4f147"`)
        await db.query(`DROP TABLE "tx"`)
        await db.query(`DROP TABLE "increase_liquidity"`)
        await db.query(`DROP INDEX "public"."IDX_de456a5f4e11486aeb0077d400"`)
        await db.query(`DROP INDEX "public"."IDX_8a500e5fa2554fe62f72335979"`)
        await db.query(`DROP TABLE "decrease_liquidity"`)
        await db.query(`DROP INDEX "public"."IDX_be0fc1db95f91615e637dd4058"`)
        await db.query(`DROP INDEX "public"."IDX_3af507a4af77cb90a45ddb8be4"`)
        await db.query(`DROP TABLE "transfer"`)
        await db.query(`DROP INDEX "public"."IDX_e8a057744db5ad984bbea97444"`)
        await db.query(`DROP INDEX "public"."IDX_fcd6254da86c093d217e6cf242"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_20ec76c5c56dd6b47dec5f0aaa8"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_22b68d0fc4aa2284f6305498d4e"`)
        await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_78506c4050ae7cedd50b08c0dc5"`)
        await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_e78e7b899d2e3327494e5fe975d"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_19f4328320501dfd14e2bae0855"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_dbeb28d0d385cca9a032c625cad"`)
        await db.query(`ALTER TABLE "collect" DROP CONSTRAINT "FK_7b01351910866ba55a09f4f147a"`)
        await db.query(`ALTER TABLE "increase_liquidity" DROP CONSTRAINT "FK_8a500e5fa2554fe62f723359796"`)
        await db.query(`ALTER TABLE "decrease_liquidity" DROP CONSTRAINT "FK_3af507a4af77cb90a45ddb8be46"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_fcd6254da86c093d217e6cf2429"`)
    }
}
