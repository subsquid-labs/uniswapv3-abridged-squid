module.exports = class Data1713534614192 {
    name = 'Data1713534614192'

    async up(db) {
        await db.query(`CREATE TABLE "factory" ("id" character varying NOT NULL, CONSTRAINT "PK_1372e5a7d114a3fa80736ba66bb" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "burn" ("id" character varying NOT NULL, "pool_address" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "owner" text, "amount" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "tick_lower" integer NOT NULL, "tick_upper" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_dcb4f14ee4534154b31116553f0" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_20ec76c5c56dd6b47dec5f0aaa" ON "burn" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_22b68d0fc4aa2284f6305498d4" ON "burn" ("pool_id") `)
        await db.query(`CREATE TABLE "swap" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "sender" text NOT NULL, "recipient" text NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "sqrt_price_x96" numeric NOT NULL, "liquidity" numeric NOT NULL, "tick" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_4a10d0f359339acef77e7f986d9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_78506c4050ae7cedd50b08c0dc" ON "swap" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_e78e7b899d2e3327494e5fe975" ON "swap" ("pool_id") `)
        await db.query(`CREATE TABLE "flash" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "sender" text NOT NULL, "recipient" text NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "amount0_paid" numeric NOT NULL, "amount1_paid" numeric NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_0c01a2c1c5f2266942dd1b3fdbc" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_3be6468a3d651a6fa61868bde5" ON "flash" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_e50643ac5b10d7513196cc23ab" ON "flash" ("pool_id") `)
        await db.query(`CREATE TABLE "collect" ("id" character varying NOT NULL, "transaction_hash" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "owner" text, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "tick_lower" integer NOT NULL, "tick_upper" integer NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_48dc0a6d1738eb0ee8f1e13d3d1" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7b01351910866ba55a09f4f147" ON "collect" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_f2f65641251421bea1e2e771f7" ON "collect" ("pool_id") `)
        await db.query(`CREATE TABLE "tx" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "from" text NOT NULL, "to" text, "gas_used" numeric NOT NULL, "gas_price" numeric NOT NULL, CONSTRAINT "PK_2e04a1db73a003a59dcd4fe916b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "mint" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "pool_address" text NOT NULL, "owner" text NOT NULL, "sender" text, "amount" numeric NOT NULL, "amount0" numeric NOT NULL, "amount1" numeric NOT NULL, "tick_lower" integer NOT NULL, "tick_upper" integer NOT NULL, "origin" text NOT NULL, "log_index" integer, "transaction_id" character varying, "pool_id" character varying, CONSTRAINT "PK_fcaea791104aa41aa11dac29cb2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_19f4328320501dfd14e2bae085" ON "mint" ("transaction_id") `)
        await db.query(`CREATE INDEX "IDX_dbeb28d0d385cca9a032c625ca" ON "mint" ("pool_id") `)
        await db.query(`CREATE TABLE "pool" ("id" character varying NOT NULL, "created_at_timestamp" TIMESTAMP WITH TIME ZONE, "created_at_block_number" integer, "token0_id" text, "token1_id" text, "initial_tick" integer, "initial_sqrt_price_x96" numeric, CONSTRAINT "PK_db1bfe411e1516c01120b85f8fe" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_20ec76c5c56dd6b47dec5f0aaa8" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_22b68d0fc4aa2284f6305498d4e" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_78506c4050ae7cedd50b08c0dc5" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "swap" ADD CONSTRAINT "FK_e78e7b899d2e3327494e5fe975d" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "flash" ADD CONSTRAINT "FK_3be6468a3d651a6fa61868bde50" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "flash" ADD CONSTRAINT "FK_e50643ac5b10d7513196cc23ab6" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "collect" ADD CONSTRAINT "FK_7b01351910866ba55a09f4f147a" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "collect" ADD CONSTRAINT "FK_f2f65641251421bea1e2e771f74" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_19f4328320501dfd14e2bae0855" FOREIGN KEY ("transaction_id") REFERENCES "tx"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_dbeb28d0d385cca9a032c625cad" FOREIGN KEY ("pool_id") REFERENCES "pool"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "factory"`)
        await db.query(`DROP TABLE "burn"`)
        await db.query(`DROP INDEX "public"."IDX_20ec76c5c56dd6b47dec5f0aaa"`)
        await db.query(`DROP INDEX "public"."IDX_22b68d0fc4aa2284f6305498d4"`)
        await db.query(`DROP TABLE "swap"`)
        await db.query(`DROP INDEX "public"."IDX_78506c4050ae7cedd50b08c0dc"`)
        await db.query(`DROP INDEX "public"."IDX_e78e7b899d2e3327494e5fe975"`)
        await db.query(`DROP TABLE "flash"`)
        await db.query(`DROP INDEX "public"."IDX_3be6468a3d651a6fa61868bde5"`)
        await db.query(`DROP INDEX "public"."IDX_e50643ac5b10d7513196cc23ab"`)
        await db.query(`DROP TABLE "collect"`)
        await db.query(`DROP INDEX "public"."IDX_7b01351910866ba55a09f4f147"`)
        await db.query(`DROP INDEX "public"."IDX_f2f65641251421bea1e2e771f7"`)
        await db.query(`DROP TABLE "tx"`)
        await db.query(`DROP TABLE "mint"`)
        await db.query(`DROP INDEX "public"."IDX_19f4328320501dfd14e2bae085"`)
        await db.query(`DROP INDEX "public"."IDX_dbeb28d0d385cca9a032c625ca"`)
        await db.query(`DROP TABLE "pool"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_20ec76c5c56dd6b47dec5f0aaa8"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_22b68d0fc4aa2284f6305498d4e"`)
        await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_78506c4050ae7cedd50b08c0dc5"`)
        await db.query(`ALTER TABLE "swap" DROP CONSTRAINT "FK_e78e7b899d2e3327494e5fe975d"`)
        await db.query(`ALTER TABLE "flash" DROP CONSTRAINT "FK_3be6468a3d651a6fa61868bde50"`)
        await db.query(`ALTER TABLE "flash" DROP CONSTRAINT "FK_e50643ac5b10d7513196cc23ab6"`)
        await db.query(`ALTER TABLE "collect" DROP CONSTRAINT "FK_7b01351910866ba55a09f4f147a"`)
        await db.query(`ALTER TABLE "collect" DROP CONSTRAINT "FK_f2f65641251421bea1e2e771f74"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_19f4328320501dfd14e2bae0855"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_dbeb28d0d385cca9a032c625cad"`)
    }
}
